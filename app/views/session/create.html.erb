<div>
  <span>注册</span>
  <%=form_for :session, url: signin_path, method: "post" do |f|%>
  手机号:<%=f.text_field :phone, class: "form-control", placeholder: "输入手机号"%>

  <%=f.text_field :verification_code%> <span onclick="getVerificationCode()" time="5" id="verification_code_btn">获得手机验证码</span>

  <%end%>
</div>

<script type="text/javascript">
  function getVerificationCode(){
    var formObj = $('form #session_phone');
    var phoneNumber = formObj.val();
    console.log(phoneNumber);
    var reg = /^1[3|4|5|8][0-9]\d{4,8}$/;
    if(!reg.test($.trim(phoneNumber))){
      alert("请输入有效手机号");
      return;
    }
    timedCount();
  }

  function timedCount(){
    var time = parseInt($("#verification_code_btn").attr("time"));
    time = time - 1;
    if(time == 0){
      $("#verification_code_btn").html("获得手机验证码");
      return;
    }
    $("#verification_code_btn").html(time + "秒");
    $("#verification_code_btn").attr("time", time);
    setTimeout("timedCount()", 1000);
  }
</script>